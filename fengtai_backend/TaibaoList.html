<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>用户信息管理系统</title>
  <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
  <script src="https://unpkg.com/vue@3"></script>
  <script src="https://unpkg.com/element-plus"></script>
  <script src="https://unpkg.com/@element-plus/icons-vue"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }
    
    body {
      background-color: #f5f7fa;
      color: #333;
      padding: 20px;
    }
    
    .user-management {
      max-width: 1200px;
      margin: 0 auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      overflow: hidden;
    }
    
    .container {
      padding: 24px;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .title {
      font-size: 22px;
      font-weight: 600;
      color: #1f2f3d;
    }
    
    .search-box {
      width: 300px;
    }
    
    .operation-buttons {
      display: flex;
      gap: 12px;
    }
    
    .z-table {
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
    
    .z-table :deep(.el-table__header) th {
      background-color: #f5f7fa;
      color: #606266;
      font-weight: 600;
    }
    
    .z-table :deep(.el-table__row:hover) {
      background-color: #f5f7fa;
    }
    
    .avatar-cell {
      display: flex;
      justify-content: center;
    }
    
    .operation-cell {
      display: flex;
      gap: 8px;
    }
    
    .pagination-box {
      display: flex;
      justify-content: flex-end;
      margin-top: 24px;
      padding: 16px;
      background: #fff;
      border-top: 1px solid #ebeef5;
    }
    
    .empty-data {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 0;
      color: #909399;
    }
    
    .empty-data i {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .loading-container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }
    
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-box {
        width: 100%;
      }
      
      .operation-buttons {
        justify-content: space-between;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="user-management">
      <div class="container">
        <div class="header">
          <h2 class="title">用户信息管理</h2>
          <el-input
            v-model="searchQuery"
            placeholder="输入名字搜索"
            :suffix-icon="Search"
            class="search-box"
            clearable
          />
          <div class="operation-buttons">
            <el-button type="primary" class="new-button" @click="addUser">
              <el-icon><Plus /></el-icon>
              新增用户
            </el-button>
            <el-button :icon="Refresh" @click="refreshData">刷新</el-button>
          </div>
        </div>

        <el-table
          class="z-table"
          :data="paginatedData"
          style="width: 100%"
          v-loading="loading"
          :default-sort="{ prop: 'name', order: 'ascending' }"
        >
          <el-table-column label="头像" width="100" align="center">
            <template #default="scope">
              <div class="avatar-cell">
                <el-avatar :src="scope.row.avatar" :size="40"></el-avatar>
              </div>
            </template>
          </el-table-column>
          <el-table-column label="名字" prop="name" sortable></el-table-column>
          <el-table-column label="生日" prop="birthdate" sortable></el-table-column>
          <el-table-column label="祖籍" prop="hometown"></el-table-column>
          <el-table-column label="操作" width="180">
            <template #default="scope">
              <div class="operation-cell">
                <el-button @click="editRow(scope.row)" size="small" type="primary" :icon="Edit">编辑</el-button>
                <el-button @click="deleteRow(scope.row)" size="small" type="danger" :icon="Delete">删除</el-button>
              </div>
            </template>
          </el-table-column>
          
          <template #empty>
            <div class="empty-data">
              <el-icon><DocumentDelete /></el-icon>
              <p>暂无数据</p>
            </div>
          </template>
        </el-table>

        <div class="pagination-box">
          <el-pagination
            v-model:current-page="currentPage"
            v-model:page-size="pageSize"
            :page-sizes="[5, 10, 20, 50]"
            :background="true"
            layout="total, sizes, prev, pager, next, jumper"
            :total="filteredData.length"
            @size-change="handleSizeChange"
            @current-change="handleCurrentChange"
          />
        </div>
      </div>
    </div>
  </div>

  <script>
    const { createApp, ref, computed, onMounted } = Vue;
    const ElIcon = ElementPlus.ElIcon;
    
    // 图标组件
    const Search = ElementPlusIconsVue.Search;
    const Plus = ElementPlusIconsVue.Plus;
    const Refresh = ElementPlusIconsVue.Refresh;
    const Edit = ElementPlusIconsVue.Edit;
    const Delete = ElementPlusIconsVue.Delete;
    const DocumentDelete = ElementPlusIconsVue.DocumentDelete;

    const App = {
      setup() {
        const searchQuery = ref('');
        const currentPage = ref(1);
        const pageSize = ref(5);
        const loading = ref(true);
        
        // 模拟数据
        const data = ref([
          { 
            id: 1,
            avatar: 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&h=100&q=80', 
            name: '张维攻', 
            birthdate: '1952-08-15', 
            hometown: '春化深口二村' 
          },
          { 
            id: 2,
            avatar: 'https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&h=100&q=80', 
            name: '李明', 
            birthdate: '1985-03-22', 
            hometown: '河北石家庄' 
          },
          { 
            id: 3,
            avatar: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&h=100&q=80', 
            name: '王芳', 
            birthdate: '1992-11-07', 
            hometown: '江苏南京' 
          },
          { 
            id: 4,
            avatar: 'https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&h=100&q=80', 
            name: '赵建国', 
            birthdate: '1978-05-30', 
            hometown: '山东青岛' 
          },
          { 
            id: 5,
            avatar: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&h=100&q=80', 
            name: '陈晓华', 
            birthdate: '1988-12-14', 
            hometown: '浙江杭州' 
          },
        ]);

        // 模拟API请求
        const fetchData = () => {
          loading.value = true;
          setTimeout(() => {
            loading.value = false;
          }, 800);
        };

        onMounted(() => {
          fetchData();
        });

        // 搜索数据
        const filteredData = computed(() => {
          if (!searchQuery.value) {
            return data.value;
          }
          const query = searchQuery.value.toLowerCase();
          return data.value.filter(item => 
            item.name.toLowerCase().includes(query) ||
            item.hometown.toLowerCase().includes(query)
          );
        });

        // 分页数据
        const paginatedData = computed(() => {
          const start = (currentPage.value - 1) * pageSize.value;
          const end = start + pageSize.value;
          return filteredData.value.slice(start, end);
        });

        // 页码变化处理
        const handleSizeChange = (val) => {
          pageSize.value = val;
          currentPage.value = 1;
        };

        const handleCurrentChange = (val) => {
          currentPage.value = val;
        };

        // 刷新数据
        const refreshData = () => {
          fetchData();
        };

        // 编辑功能
        const editRow = (row) => {
          ElMessageBox.alert(`编辑用户: ${row.name}`, '提示', {
            confirmButtonText: '确定',
          });
        };

        // 删除功能
        const deleteRow = (row) => {
          ElMessageBox.confirm(`确定要删除用户 "${row.name}" 吗?`, '警告', {
            confirmButtonText: '确定',
            cancelButtonText: '取消',
            type: 'warning',
          }).then(() => {
            const index = data.value.findIndex(item => item.id === row.id);
            if (index !== -1) {
              data.value.splice(index, 1);
              ElMessage.success('删除成功');
            }
          }).catch(() => {
            // 用户取消删除
          });
        };

        // 新增用户
        const addUser = () => {
          ElMessageBox.prompt('请输入用户姓名', '新增用户', {
            confirmButtonText: '确定',
            cancelButtonText: '取消',
          }).then(({ value }) => {
            if (value) {
              const newUser = {
                id: Math.max(...data.value.map(u => u.id)) + 1,
                avatar: 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&auto=format&fit=crop&w=100&h=100&q=80',
                name: value,
                birthdate: '1990-01-01',
                hometown: '待填写'
              };
              data.value.unshift(newUser);
              ElMessage.success('添加成功');
            }
          }).catch(() => {
            // 用户取消输入
          });
        };

        return {
          searchQuery,
          currentPage,
          pageSize,
          loading,
          filteredData,
          paginatedData,
          handleSizeChange,
          handleCurrentChange,
          editRow,
          deleteRow,
          addUser,
          refreshData,
          Search,
          Plus,
          Refresh,
          Edit,
          Delete,
          DocumentDelete
        };
      }
    };

    const app = createApp(App);
    app.use(ElementPlus);
    app.component('ElIcon', ElIcon);
    app.mount('#app');
  </script>
</body>
</html>